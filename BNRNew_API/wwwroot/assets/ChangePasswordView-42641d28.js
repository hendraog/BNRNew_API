import{_ as P,i as p,g as b,u as _,a as y,r as i,o as C,k as S,c as k,b as t,l as u,f as D}from"./index-6e7c5c32.js";import{C as d}from"./index-26e53d5e.js";import{S as V}from"./index-20f92749.js";const E={class:"flex items-center justify-center w-screen h-screen"},I={class:"shadow w-96 rounded-xl bg-gray-700"},B={class:"flex flex-col px-6 py-6 lg:px-8"},H=t("h3",{class:"text-xl font-medium text-white pb-5 self-center"},"Change Password",-1),M={__name:"ChangePasswordView",emits:["showLoading","loggedIn"],setup(N,{emit:m}){const v=p("httpClient");p("auth");const n=b().appContext,f={newPassword:{type:"string",required:!0,min:1,max:999,message:"Silahkan input password yg baru"},oldPassword:{type:"string",required:!0,min:1,max:999,message:"Silahkan input password yg lama"}},c=m;_(),y();const o=i(""),r=i(""),l=i(""),h=async()=>{const w=new V(f);if(o.value!=l.value){n.config.globalProperties.showErrorDlg("password baru dan konfirmasi Password Baru tidak sama");return}var e={oldPassword:r.value,newPassword:o.value};w.validate(e).then(async()=>{e.oldPassword=d.SHA256(e.oldPassword).toString(d.enc.Hex),e.newPassword=d.SHA256(e.newPassword).toString(d.enc.Hex),c("showLoading",!0);var s=await v("put","/user/change-password",e);c("showLoading",!1),s.status==200?(r.value="",o.value="",l.value="",n.config.globalProperties.showInfoDlg(s.data.message)):n.config.globalProperties.showErrorDlg(s.message),console.log(s)}).catch(({errors:s,fields:a})=>{var g="";s.forEach(x=>{g+="* "+(x.message+"<br>")}),n.config.globalProperties.showErrorDlg(g)})};return C(async()=>{}),(w,e)=>{const s=S("MyInputText");return D(),k("div",E,[t("div",I,[t("div",B,[H,u(s,{label:"Old Password",maxlength:"50",value:r.value,"onUpdate:value":e[0]||(e[0]=a=>r.value=a)},null,8,["value"]),u(s,{label:"New Password",maxlength:"50",value:o.value,"onUpdate:value":e[1]||(e[1]=a=>o.value=a)},null,8,["value"]),u(s,{label:"Confirm New Password",maxlength:"50",value:l.value,"onUpdate:value":e[2]||(e[2]=a=>l.value=a)},null,8,["value"])]),t("div",{class:"py-3 px-2"},[t("button",{onClick:h,class:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},"Change Password")])])])}}},q=P(M,[["__file","D:/sourcecode/my_api/bnr_app_ui/src/views/ChangePasswordView.vue"]]);export{q as default};
//# sourceMappingURL=ChangePasswordView-42641d28.js.map
