{"version":3,"file":"ReportCargo-2b20a6aa.js","sources":["../../src/views/ReportCargo.vue"],"sourcesContent":["<script setup>\r\n    import { ref, onMounted, inject, getCurrentInstance } from 'vue'\r\n    import { useRoute,useRouter  } from 'vue-router'\r\n    import moment from 'moment';\r\n   \r\n\r\n    const httpClient = inject('httpClient');\r\n    const auth = inject('auth');\r\n    const app = getCurrentInstance().appContext;\r\n\r\n\r\n\r\n    const emit = defineEmits(['showLoading','loggedIn'])\r\n\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n\r\n    const startDate = ref(null);\r\n    const endDate = ref(null);\r\n    \r\n    const doGetReport = async () => {\r\n\r\n        var data = {\r\n            \"start_date\": moment.utc(startDate.value),\r\n            \"end_date\": moment.utc(endDate.value)\r\n        }\r\n\r\n\r\n        emit('showLoading', true);\r\n        var response = await httpClient('post', '/report/report_cargo', data,\"blob\");\r\n        emit('showLoading', false);\r\n        \r\n        if(response.status == 200){\r\n            const href = URL.createObjectURL(response.data);\r\n\r\n            // create \"a\" HTML element with href to file & click\r\n            const link = document.createElement('a');\r\n            link.href = href;\r\n            link.setAttribute('download', 'report.xls'); //or any other extension\r\n            document.body.appendChild(link);\r\n            link.click();\r\n\r\n            // clean up \"a\" element & remove ObjectURL\r\n            document.body.removeChild(link);\r\n            URL.revokeObjectURL(href);\r\n        }else {\r\n            app.config.globalProperties.showErrorDlg(response.message);\r\n        }\r\n        console.log(response);\r\n    }\r\n</script>\r\n\r\n<template>\r\n    <div class=\"flex items-center justify-center w-screen  h-screen\">\r\n        <div class=\" shadow w-96 rounded-xl bg-gray-700\">\r\n            <div class=\"flex flex-col px-6 py-6 lg:px-8\">\r\n\r\n                <h3 class=\"text-xl font-medium text-white pb-5 self-center mb-5\">Report Cargo</h3>\r\n\r\n                <MyInputDate label=\"Tanggal Start\" \r\n                    v-model:value=\"startDate\" />\r\n                    \r\n                <label class=\"mt-2 mb-2 text-white self-center\">Sampai Dengan</label>\r\n\r\n                <MyInputDate label=\"Tanggal Akhir\" endOfDayTime\r\n                    v-model:value=\"endDate\" />\r\n                   \r\n            </div>\r\n\r\n            <div class=\"py-3 px-2\">\r\n                <button @click=\"doGetReport\"\r\n                class=\"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center\">Generate Report</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>"],"names":["httpClient","inject","app","getCurrentInstance","emit","__emit","useRoute","useRouter","startDate","ref","endDate","doGetReport","data","moment","response","href","link"],"mappings":"sgBAMI,MAAMA,EAAaC,EAAO,YAAY,EACzBA,EAAO,MAAM,EAC1B,MAAMC,EAAMC,EAAoB,EAAC,WAI3BC,EAAOC,EAECC,EAAU,EACTC,EAAW,EAE1B,MAAMC,EAAYC,EAAI,IAAI,EACpBC,EAAUD,EAAI,IAAI,EAElBE,EAAc,SAAY,CAE5B,IAAIC,EAAO,CACP,WAAcC,EAAO,IAAIL,EAAU,KAAK,EACxC,SAAYK,EAAO,IAAIH,EAAQ,KAAK,CACvC,EAGDN,EAAK,cAAe,EAAI,EACxB,IAAIU,EAAW,MAAMd,EAAW,OAAQ,uBAAwBY,EAAK,MAAM,EAG3E,GAFAR,EAAK,cAAe,EAAK,EAEtBU,EAAS,QAAU,IAAI,CACtB,MAAMC,EAAO,IAAI,gBAAgBD,EAAS,IAAI,EAGxCE,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EACZC,EAAK,aAAa,WAAY,YAAY,EAC1C,SAAS,KAAK,YAAYA,CAAI,EAC9BA,EAAK,MAAK,EAGV,SAAS,KAAK,YAAYA,CAAI,EAC9B,IAAI,gBAAgBD,CAAI,CACpC,MACYb,EAAI,OAAO,iBAAiB,aAAaY,EAAS,OAAO,EAE7D,QAAQ,IAAIA,CAAQ,CACvB"}