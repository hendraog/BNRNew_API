import{_ as C,i as f,g as B,u as I,a as L,r as b,o as G,j as N,k as u,c as V,l as g,m as z,F,f as O,b as c}from"./index-71bc4530.js";import{S as $}from"./index-20f92749.js";const R={class:"flex flex-row"},j=c("div",{class:"p-2"},null,-1),q={class:"flex flex-row items-end"},K=c("label",{class:"text-xs text-white italic mb-2 ml-2"},"Format -> BK 1234 SS, B 12 S,....",-1),Z=c("div",{class:"mt-5"},null,-1),H=c("label",{class:"text-s text-white italic"},'Untuk upload bulk, masukan format data dengan contoh "B 1223 HB;A" dimana A adalah golongannya',-1),J={__name:"MasterGolonganPlatView",emits:["showLoading","showAlert","showConfirmationDlg"],setup(Q,{emit:w}){const D=f("httpClient"),y=f("auth"),n=B().appContext;I(),L();const s=w,d=b(null),m=b(null),v=b([]),k=[{key:"id",label:"Id",sortable:!0,highlight:!0},{key:"golongan_name",label:"Golongan",sortable:!0,highlight:!0},{key:"plat_no",label:"Plat No",sortable:!0},{key:"createdAt",label:"CREATED AT",sortable:!0,datetime:!0},{key:"updatedAt",label:"UPDATED AT",sortable:!0,datetime:!0}],x={golonganid:{type:"number",required:!0,message:"Silahkan input golongan"},plat_no:{type:"string",required:!0,pattern:"^[a-zA-Z]{1,2} [0-9]{1,4} [a-zA-Z]{1,3}$",message:"Silahkan input no Plat yg benar"}};G(()=>{P()});const P=async()=>{s("showLoading",!0);var a=await D("get","/golongan?page=1&pageSize=1000");if(s("showLoading",!1),console.log(a),a.status==200){var e=a.data.map(r=>({key:r.id,label:r.golongan}));v.value=e}else n.config.globalProperties.showErrorDlg(a.message)},A=async(a,e,r,t,i)=>{i=i,s("showLoading",!0);var o=await D("get",`/golongan-plat?page=${a}&pageSize=${t}&filter=${i}`);if(s("showLoading",!1),console.log(o),o.status==200)return o.data;n.config.globalProperties.showErrorDlg(o.message)},M=()=>{d.value.showDlg({golongan:null,harga:0,min_length:1,max_length:1,createdAt:null,updatedAt:null})},T=a=>{d.value.showDlg(a)},E=a=>{console.log(a)},S=async a=>{if(s("showLoading",!0),!a.id&&a.data){var e=await D("post","/golongan-plat/bulk",a);if(e&&e.status==200)return d.value.hide(),m.value.loadData(),n.config.globalProperties.showErrorDlg(e.data.message),data;n.config.globalProperties.showErrorDlg(e.message)}else new $(x).validate(a).then(async()=>{var t=await D(a.id?"put":"post","/golongan-plat",a);if(t&&t.status==200)return d.value.hide(),m.value.loadData(),data;n.config.globalProperties.showErrorDlg(t.message)}).catch(({errors:t,fields:i})=>{var o="";t.forEach(_=>{o+="* "+(_.message+"<br>")}),n.config.globalProperties.showErrorDlg(o)});s("showLoading",!1)},h=N({get(){return y.checkPermission("MasterPlatManage")}});return(a,e)=>{const r=u("MenuTitleLabel"),t=u("DataTable"),i=u("DropDown"),o=u("MyInputText"),_=u("MyInputTextArea"),U=u("InputModalDialog");return O(),V(F,null,[g(r,{label:"Master Golongan Plat"}),g(t,{ref_key:"dataTable",ref:m,fields:k,loadDataFunction:A,enableDelete:h.value,enableCreate:h.value,enableUpdate:h.value,onOnCreateNew:M,onOnEdit:T,onOnDelete:E},null,8,["enableDelete","enableCreate","enableUpdate"]),g(U,{ref_key:"inputDlg",ref:d,title:"Data Golongan Plat",data:a.currentData,"onUpdate:data":e[0]||(e[0]=l=>a.currentData=l),onOnSubmitClick:S,enableSubmit:h.value},{dlgContent:z(l=>[c("div",R,[g(i,{label:"Golongan",data:v.value,valueByKey:"",selectedData:l.currentDialogData.golonganid,"onUpdate:selectedData":p=>l.currentDialogData.golonganid=p},null,8,["data","selectedData","onUpdate:selectedData"]),j,c("div",q,[g(o,{label:"Plat No",w:"140px",maxlength:"11",inputAdditionalClass:"uppercase",value:l.currentDialogData.plat_no,"onUpdate:value":p=>l.currentDialogData.plat_no=p},null,8,["value","onUpdate:value"]),K])]),Z,g(_,{label:"Data Upload Bulk",inputAdditionalClass:"uppercase",value:l.currentDialogData.data,"onUpdate:value":p=>l.currentDialogData.data=p},null,8,["value","onUpdate:value"]),H]),_:1},8,["data","enableSubmit"])],64)}}},Y=C(J,[["__file","D:/sourcecode/my_api/bnr_app_ui/src/views/MasterGolonganPlatView.vue"]]);export{Y as default};
//# sourceMappingURL=MasterGolonganPlatView-d3c40d0b.js.map
